{"version":3,"sources":["../src/iot.js"],"names":["Thingy","require","Hs100Api","startRadio","stopRadio","HS100_IP","INTERVAL","MyThingy","onDiscover","bind","switchLight","_onTemperatureData","_onPressureData","_onHumidityData","_onHeadingData","_onGasData","_onColorData","_onRotationData","_enableSensors","_disableSensors","_onButtonChange","startCameraService","startSensors","thingy","startSensorsStatus","data","_this","Promise","resolve","reject","discover","console","log","uuid","connectAndSetUp","error","state","self","isSetThingy","led","r","g","b","Number","led_set","client","Client","lightplug","getPlug","host","getInfo","then","setPowerState","e","cb","_addEventListeners","_addIntervals","temperature","_id","eco2","pressure","humidity","gas","tvoc","color","rotation","steps","heading","on","_onStepCounterData","temperature_interval_set","pressure_interval_set","humidity_interval_set","color_interval_set","gas_mode_set","stepCounter_interval_set","temperature_enable","pressure_enable","humidity_enable","color_enable","gas_enable","button_enable","rotation_enable","heading_enable","stepCounter_enable","temperature_disable","pressure_disable","humidity_disable","color_disable","gas_disable","rotation_disable","heading_disable","stepCounter_disable","module","exports"],"mappings":"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","sourcesContent":["// Import required packages\nimport insertIntoMongo from './services/mongo';\nimport insertIntoFirebase from './services/firebase';\n\nconst Thingy = require('thingy52');\nconst Hs100Api = require('hs100-api');\nconst {startRadio, stopRadio} = require('./radio');\n\nconst HS100_IP = '192.168.230.204';\nconst INTERVAL = 1500;\n\n\nclass MyThingy {\n    constructor() {\n        this.onDiscover = this.onDiscover.bind(this);\n        this.switchLight = this.switchLight.bind(this);\n        this._onTemperatureData = this._onTemperatureData.bind(this);\n        this._onPressureData = this._onPressureData.bind(this);\n        this._onHumidityData = this._onHumidityData.bind(this);\n        this._onHumidityData = this._onHumidityData.bind(this);\n        this._onHeadingData = this._onHeadingData.bind(this);\n        this._onGasData = this._onGasData.bind(this);\n        this._onColorData = this._onColorData.bind(this);\n        this._onRotationData = this._onRotationData.bind(this);\n\n        this._enableSensors = this._enableSensors.bind(this);\n        this._disableSensors = this._disableSensors.bind(this);\n\n        this._onButtonChange = this._onButtonChange.bind(this);\n        this.startCameraService = this.startSensors.bind(this);\n\n        this.thingy = null;\n        this.startSensorsStatus = false;\n        this.data = {};\n    }\n\n    connect() {\n        const _this = this;\n        return new Promise((resolve, reject) => {\n            Thingy.discover((thingy) => _this.onDiscover(thingy, resolve));\n        });\n    }\n\n    onDiscover(thingy, resolve) {\n        console.log('Discovered thingy in the class with  uuid : ', (thingy.uuid));\n        this.thingy = thingy;\n        thingy.connectAndSetUp(function (error) {\n            console.log('Connected, and error ' + error);\n            resolve(thingy);\n        });\n    }\n\n    isSetThingy() {\n        if (this.thingy) return true;\n        console.log('Discovering thing, please wait ...');\n        Thingy.discover(this.onDiscover);\n    }\n\n    async switchLight(state) {\n        const self = this;\n        return new Promise(function (resolve, reject) {\n            if (!self.isSetThingy()) return resolve(false);\n            const led = {\n                r: 255,\n                g: 10,\n                b: 10\n            };\n\n            if (Number(state) == 1) {\n                led.r = 0;\n                led.g = 128;\n            } else {\n                led.r = 255;\n                led.g = 0;\n            }\n\n            self.thingy.led_set(led, function () {\n                console.log(Number(state) === 1 ? 'Lights On' : 'Lights Off');\n                resolve(state);\n            });\n        })\n    }\n\n    async switchRadio(state) {\n        const self = this;\n        return new Promise(function (resolve, reject) {\n            if (!self.isSetThingy()) return resolve(false);\n            Number(state) === 1 ? startRadio(self.thingy) : stopRadio(self.thingy);\n            resolve(state);\n        });\n    }\n\n    async switchHs100(state) {\n        const self = this;\n        return new Promise(function (resolve, reject) {\n            try {\n                const client = new Hs100Api.Client();\n                const lightplug = client.getPlug({host: HS100_IP});\n                lightplug.getInfo().then(console.log);\n                lightplug.setPowerState(Number(state) === 1 ? true : false);\n                resolve(state);\n            } catch(e) {\n                console.log('Error in connection');\n                resolve(0);\n            }\n        })\n    }\n\n    async startSensors(cb) {\n        const self = this;\n        self.cb = cb;\n        return new Promise(function (resolve, reject) {\n            if (!self.isSetThingy()) return resolve(true);\n            self.startSensorsStatus = true;\n            self._addEventListeners();\n            self._addIntervals();\n            self._enableSensors();\n        });\n    }\n\n    _onButtonChange(state) {\n        if (state === 'Pressed') {\n            if (this.startSensorsStatus === true) {\n                this.cb(true);\n                this.startSensorsStatus = false;\n                this._disableSensors();\n                this.switchLight(0).then(()=>console.log('Disabled sensors data'));\n            } else {\n                this.startSensorsStatus = true;\n                this.cb(false);\n                this._enableSensors();\n                this.switchLight(1).then(()=>console.log('Enabled sensors data'));\n            }\n        }\n    }\n\n    _onTemperatureData(temperature) {\n        this.data.temperature = temperature;\n        this.data._id && delete this.data['_id'];\n        // console.log(JSON.stringify(this.data));\n        insertIntoMongo(this.data);\n\n        if (this.data.eco2) {\n            insertIntoFirebase(this.data);\n        }\n    }\n\n    _onPressureData(pressure) {\n        this.data.pressure = pressure;\n    }\n\n    _onHumidityData(humidity) {\n        this.data.humidity = humidity;\n    }\n\n    _onGasData(gas) {\n        this.data.eco2 = gas.eco2;\n        this.data.tvoc = gas.tvoc;\n    }\n\n    _onColorData(color) {\n        this.data.color = color;\n    }\n\n    _onRotationData(rotation) {\n        this.data.rotation = rotation;\n    }\n\n    _onStepCounterData(steps) {\n        this.data.steps = steps;\n        console.log('Steps')\n    }\n\n    _onHeadingData(heading) {\n        this.data.heading = heading;\n    }\n\n    _addEventListeners() {\n        this.thingy.on('temperatureNotif', this._onTemperatureData);\n        this.thingy.on('pressureNotif', this._onPressureData);\n        this.thingy.on('humidityNotif', this._onHumidityData);\n        this.thingy.on('gasNotif', this._onGasData);\n        this.thingy.on('colorNotif', this._onColorData);\n        this.thingy.on('buttonNotif', this._onButtonChange);\n        this.thingy.on('rotationNotif', this._onRotationData);\n        this.thingy.on('stepCounterNotif', this._onStepCounterData);\n        this.thingy.on('headingNotif', this._onHeadingData);\n    }\n\n    _addIntervals() {\n        this.thingy.temperature_interval_set(INTERVAL, function (error) {\n            if (error) {\n                console.log('Temperature sensor configure! ' + error);\n            }\n        });\n        this.thingy.pressure_interval_set(INTERVAL, function (error) {\n            if (error) {\n                console.log('Pressure sensor configure! ' + error);\n            }\n        });\n        this.thingy.humidity_interval_set(INTERVAL, function (error) {\n            if (error) {\n                console.log('Humidity sensor configure! ' + error);\n            }\n        });\n        this.thingy.color_interval_set(INTERVAL, function (error) {\n            if (error) {\n                console.log('Color sensor configure! ' + error);\n            }\n        });\n        this.thingy.gas_mode_set(1, function (error) {\n            if (error) {\n                console.log('Gas sensor configure! ' + error);\n            }\n        });\n        this.thingy.stepCounter_interval_set(INTERVAL, function (error) {\n            if (error) {\n                console.log('Step interval sensor configure! ' + error);\n            }\n        });\n\n        this.thingy.stepCounter_interval_set(INTERVAL, function (error) {\n            if (error) {\n                console.log('Step interval sensor configure! ' + error);\n            }\n        });\n    }\n\n    _enableSensors() {\n        this.thingy.temperature_enable(function (error) {\n            console.log('Temperature sensor started! ' + ((error) ? error : ''));\n        });\n        this.thingy.pressure_enable(function (error) {\n            console.log('Pressure sensor started! ' + ((error) ? error : ''));\n        });\n        this.thingy.humidity_enable(function (error) {\n            console.log('Humidity sensor started! ' + ((error) ? error : ''));\n        });\n        this.thingy.color_enable(function (error) {\n            console.log('Color sensor started! ' + ((error) ? error : ''));\n        });\n        this.thingy.gas_enable(function (error) {\n            console.log('Gas sensor started! ' + ((error) ? error : ''));\n        });\n        this.thingy.button_enable(function (error) {\n            console.log('Button started! ' + ((error) ? error : ''));\n        });\n        this.thingy.rotation_enable(function (error) {\n            console.log('Rotation sensor started ' + error ? error : '');\n        });\n        this.thingy.heading_enable(function (error) {\n            console.log('Heading sensor started ' + error ? error : '');\n        });\n\n        this.thingy.stepCounter_enable(function (error) {\n            console.log('Step counter sensor started ' + error ? error : '');\n        });\n    }\n\n    _disableSensors() {\n        this.thingy.temperature_disable(function (error) {\n            console.log('Temperature sensor disabled! ' + ((error) ? error : ''));\n        });\n        this.thingy.pressure_disable(function (error) {\n            console.log('Pressure sensor disabled! ' + ((error) ? error : ''));\n        });\n        this.thingy.humidity_disable(function (error) {\n            console.log('Humidity sensor disabled! ' + ((error) ? error : ''));\n        });\n        this.thingy.color_disable(function (error) {\n            console.log('Color sensor disabled! ' + ((error) ? error : ''));\n        });\n        this.thingy.gas_disable(function (error) {\n            console.log('Gas sensor disabled! ' + ((error) ? error : ''));\n        });\n        this.thingy.rotation_disable(function (error) {\n            console.log('Rotation sensor disabled ' + error ? error : '');\n        });\n        this.thingy.heading_disable(function (error) {\n            console.log('Heading sensor disabled ' + error ? error : '');\n        });\n\n        this.thingy.stepCounter_disable(function (error) {\n            console.log('Step counter sensor disabled ' + error ? error : '');\n        });\n    }\n\n    async startCameraService() {\n        const self = this;\n        return new Promise(function (resolve, reject) {\n\n        });\n    }\n}\n\nmodule.exports = MyThingy;\n"],"file":"iot.js"}